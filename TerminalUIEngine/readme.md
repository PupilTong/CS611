# Hammer_Euv - a Terminal MVVM UI Engine

*if you have a hammer, everything looks like a nail*

Hammer_Euv is a terminal UI engine based on my CS 611 OOD homework 4. The basic idea is I prefer to deal with my assignment tasks by using front-end way/patterns/styles.

## Artchiture
### Intefaces
#### ModelProperty

This interface defines essential methods for two-way binding properties in model. The ViewModel could use this interface and Reflection(will be introduced later) to interating all ModelProperty in your Model.

#### View

Defines essential methods for a View.

#### ViewModel

Defines a viewmodel control and logic interface.

#### Model

All model must implements this interface. Even it's a empty interface, It may add some members in the following version

#### UIEngine

UI Engine handles all stuffs relate to ui.

### Classes

#### GameEngine

![](./readme/engine.png)

GameEngine package contains TerminalUIEngine implements UIEngine. It also contains predefined Colors for TerminalUIEngine.(ANSI standards)

#### Model

* single line properties

![](./readme/modelproperty0.png)

A single line property means the property's get() method could only get a iterator which contains one value.

* Multiline properties

![](./readme/listproperty.png)


A multiline property means could be outputed to view in multilines. (This not means it must be outputed in multilines. `GameView` will only output the first line if a block is defined as a oneline block. (See `view render` following)

**the list properties could not be changed by set(String value) method**
This method will call notify the property changed handlers only.
use `set(List<Object> list)` 
or 
modify the origional container and then call this method for sending a notification.

* Model 

![](./readme/modeldemo.png)

This is a simple Model example. The `GameViewModel` will automaticlly bind each member in a model to a fields(which has a same name) in the view.

* Observer Pattern

Every properties has a observer set. The set contains all viewmodels hooked for this property. Once the property has been changed(`Set()`), the hook set will be iteratored.

#### UIFactory

**Factory Pattern**

![](./readme/UIFactory.png)

You need to use this `GameUIComponmentFactory` to generate your GameUIComponment.
Instant your Model, ViewModel and View, then use the factory to generate your GameUIComponment.

### ViewModel

See`view render`

![](./readme/VVM.png)



### run instructions
In order to run this game, you have to unzip all the resource file to a directiory and modify such setting in `LegendGame` class
```

    public static final int mapHeight = 8;
    public static final int mapWidth = 8;
    public static final int fightChance = 80;
    public static final String resourceDir = "/home/ubuntu/CS611/hw4/Legend/resources/";
```
### Design decision
* All data will be int
* hero only allowed to equip one weapon and one armor
* weapon & armor & potions & magics could be used in bags
### Core Engine
**MVVM Artchture**
*if all you have is a hammer, everything looks like a nail*

The most important& time-consuming part is MVVM ui engine. I implement it using Reflex to access all property in the model and replace the corresponding element in the view. I spend too much time on that.

The uiComponment should be generated by factory(factory pattern).

TerminalUIEngine handles all ui stuff, like components show, close, send a notification, catch an input,etc.
**Game**
GameItems stores in GameItems folder.

GameIterfaces stores in GameInterfaces folder.

the whole system follows show/close actions of uicomponments.

### Bugs
Since many functions didn't finish, there are many bugs in bag system.
